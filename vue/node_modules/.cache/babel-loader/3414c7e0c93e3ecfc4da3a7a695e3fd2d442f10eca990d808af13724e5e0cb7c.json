{"ast":null,"code":"export default {\n  name: \"GoodsDetail\",\n  data() {\n    return {\n      id: this.$route.query.id,\n      goods: {},\n      current: '商品详情'\n    };\n  },\n  created() {\n    //先更新浏览数，再加载商品数据\n    this.$request.put('collect/updateReadCount/' + this.id).then(res => {\n      this.load();\n    });\n  },\n  methods: {\n    changeItem(current) {\n      this.current = current;\n    },\n    addCollect() {\n      this.$request.post('collect/add', {\n        fid: this.goods.id,\n        module: \"goods\"\n      }).then(res => {\n        if (res.code === '200') {\n          this.$message.success('操作成功');\n          this.load();\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    addLikes() {\n      this.$request.post('likes/add', {\n        fid: this.goods.id,\n        module: \"goods\"\n      }).then(res => {\n        if (res.code === '200') {\n          this.$message.success('操作成功');\n          this.load();\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    load() {\n      this.$request.get('/goods/selectById/' + this.id).then(res => {\n        this.goods = res.data || {};\n        console.log(this.goods);\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","id","$route","query","goods","current","created","$request","put","then","res","load","methods","changeItem","addCollect","post","fid","module","code","$message","success","error","msg","addLikes","get","console","log"],"sources":["src/views/front/GoodsDetail.vue"],"sourcesContent":["<template>\r\n    <div style=\"margin: 0 auto; padding: 10px 0; width: 50%\">\r\n      <div style=\"display: flex; grid-gap: 20px; margin-bottom: 40px\">\r\n        <img :src=\"goods.img\" alt=\"\" style=\"width: 50%; height: 400px; display: block\">\r\n        <div>\r\n          <div style=\"font-weight: bold; font-size: 26px; margin: 20px 0\">{{ goods.name }}</div>\r\n          <div style=\"color: #666; font-size: 16px;\">\r\n            <span>浏览 {{ goods.readCount }}</span>\r\n            <span style=\"margin-left: 20px\">点赞 {{ goods.likesCount }}</span>\r\n            <span style=\"margin-left: 20px\">收藏 {{ goods.collectCount }}</span>\r\n          </div>\r\n          <div style=\"color: red; font-size: 24px; margin: 40px 0\">￥{{ goods.price }}</div>\r\n          <div style=\"margin-bottom: 20px\"><span style=\"color: #666\">发货地：</span> {{ goods.address }}</div>\r\n          <div style=\"margin-bottom: 20px\"><span style=\"color: #666\">卖家：</span> {{ goods.userName }}</div>\r\n          <div style=\"margin-bottom: 40px\"><span style=\"color: #666\">发布日期：</span> {{ goods.date }}</div>\r\n          <div>\r\n            <el-button v-if=\"!goods.userLikes\" @click=\"addLikes()\" size=\"medium\" style=\"background-color: orangered; color: #eee; border-color: orangered\">点赞</el-button>\r\n            <el-button v-if=\"goods.userLikes\" @click=\"addLikes()\" size=\"medium\" style=\"background-color: orangered; color: #eee; border-color: orangered\">取消点赞</el-button>\r\n            <el-button v-if=\"!goods.userCollect\" @click=\"addCollect()\" size=\"medium\" style=\"background-color: orangered; color: #eee; border-color: orangered\">点赞</el-button>\r\n            <el-button v-if=\"goods.userCollect\" @click=\"addCollect()\" size=\"medium\" style=\"background-color: orangered; color: #eee; border-color: orangered\">取消收藏</el-button>\r\n            <el-button size=\"medium\" type=\"warning\">收藏</el-button>\r\n            <el-button size=\"medium\" type=\"danger\">立即购买</el-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  \r\n      <div>\r\n        <div style=\"display: flex; border-bottom: 1px solid orangered; margin-bottom: 10px\">\r\n          <div style=\"padding: 10px 20px; cursor: pointer\" :class=\"{ 'active' : current === '商品详情' }\" @click=\"changeItem('商品详情')\">商品详情</div>\r\n          <div style=\"padding: 10px 20px; cursor: pointer\" :class=\"{ 'active' : current === '商品评论' }\" @click=\"changeItem('商品评论')\">商品评论</div>\r\n\r\n        </div>\r\n  \r\n        <div v-if=\"current === '商品详情'\">\r\n          <div v-html=\"goods.content\"></div>\r\n        </div>\r\n  \r\n        <div v-if=\"current === '商品评论'\">\r\n  \r\n        </div>\r\n  \r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n<script>\r\n\r\nexport default{\r\n    name:\"GoodsDetail\",\r\n    data(){\r\n        return {\r\n            id:this.$route.query.id,\r\n            goods:{},\r\n            current:'商品详情'\r\n        }\r\n    },\r\n    created(){\r\n      //先更新浏览数，再加载商品数据\r\n      this.$request.put('collect/updateReadCount/' + this.id).then(res => {\r\n        this.load()\r\n      })\r\n    },\r\n    methods:{\r\n      changeItem(current) {\r\n        this.current = current\r\n      },\r\n      addCollect(){\r\n        this.$request.post('collect/add', {fid: this.goods.id, module: \"goods\"}).then(res => {\r\n          if(res.code ==='200'){\r\n            this.$message.success('操作成功')\r\n            this.load()\r\n          }else{\r\n            this.$message.error(res.msg)\r\n          }\r\n        })\r\n      },\r\n      addLikes(){\r\n        this.$request.post('likes/add', {fid: this.goods.id, module: \"goods\"}).then(res => {\r\n          if(res.code ==='200'){\r\n            this.$message.success('操作成功')\r\n            this.load()\r\n          }else{\r\n            this.$message.error(res.msg)\r\n          }\r\n        })\r\n      },\r\n        load() {\r\n\r\n            this.$request.get('/goods/selectById/' + this.id).then(res => {\r\n            this.goods = res.data || {}\r\n              console.log(this.goods)\r\n      })\r\n    }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.active{\r\n    background-color: orangered;\r\n    color: #eee;\r\n}\r\n</style>\r\n"],"mappings":"AA+CA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,EAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAF,EAAA;MACAG,KAAA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACA;IACA,KAAAC,QAAA,CAAAC,GAAA,mCAAAP,EAAA,EAAAQ,IAAA,CAAAC,GAAA;MACA,KAAAC,IAAA;IACA;EACA;EACAC,OAAA;IACAC,WAAAR,OAAA;MACA,KAAAA,OAAA,GAAAA,OAAA;IACA;IACAS,WAAA;MACA,KAAAP,QAAA,CAAAQ,IAAA;QAAAC,GAAA,OAAAZ,KAAA,CAAAH,EAAA;QAAAgB,MAAA;MAAA,GAAAR,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAQ,IAAA;UACA,KAAAC,QAAA,CAAAC,OAAA;UACA,KAAAT,IAAA;QACA;UACA,KAAAQ,QAAA,CAAAE,KAAA,CAAAX,GAAA,CAAAY,GAAA;QACA;MACA;IACA;IACAC,SAAA;MACA,KAAAhB,QAAA,CAAAQ,IAAA;QAAAC,GAAA,OAAAZ,KAAA,CAAAH,EAAA;QAAAgB,MAAA;MAAA,GAAAR,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAQ,IAAA;UACA,KAAAC,QAAA,CAAAC,OAAA;UACA,KAAAT,IAAA;QACA;UACA,KAAAQ,QAAA,CAAAE,KAAA,CAAAX,GAAA,CAAAY,GAAA;QACA;MACA;IACA;IACAX,KAAA;MAEA,KAAAJ,QAAA,CAAAiB,GAAA,6BAAAvB,EAAA,EAAAQ,IAAA,CAAAC,GAAA;QACA,KAAAN,KAAA,GAAAM,GAAA,CAAAV,IAAA;QACAyB,OAAA,CAAAC,GAAA,MAAAtB,KAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}